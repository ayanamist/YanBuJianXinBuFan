// ==UserScript==
// @name			眼不见心不烦（新浪微博）
// @namespace		http://weibo.com/salviati
// @license			MIT License
// @description		新浪微博（weibo.com）非官方功能增强脚本，具有屏蔽关键词、用户、来源、链接，改造版面等功能
// @features		（新版微博）可以屏蔽推广微博；（新版微博）可以禁止在浏览分组时默认发布新微博到该分组；（新版微博）可以选择不屏蔽自己发布的微博；增加对自由之星标识、礼物盒模块的屏蔽；（新版微博）修正关闭双栏模式时“我关注的人”左边栏部分按钮失效的问题；（新版微博）修正去掉个人主页封面图时背景颜色的问题
// @version			1.0.6
// @revision		75
// @author			@富平侯
// @committers		@牛肉火箭, @JoyerHuang_悦
// @grant			GM_getValue
// @grant			GM_setValue
// @grant			GM_addStyle
// @grant			GM_xmlhttpRequest
// @include			http://weibo.com/*
// @include			http://www.weibo.com/*
// @updateURL		https://userscripts.org/scripts/source/114087.meta.js
// @downloadURL		https://userscripts.org/scripts/source/114087.user.js
// ==/UserScript==
(function(){function r(){}var a=function(){var a=function(a){return document.getElementById(a)};a.select=function(a,d){d||(d=document);return d.querySelector(a)};a.window=unsafeWindow&&unsafeWindow.$CONFIG?unsafeWindow:function(){var a=document.createElement("p");a.setAttribute("onclick","return window;");return a.onclick()}();a.config=a.window.$CONFIG;if(a.config)return a.uid=a.config&&a.config.uid,a.V5=a.config.any&&-1<a.config.any.indexOf("wvr=5"),a.STK=a.window.STK,!GM_getValue||GM_getValue.toString&&
-1<GM_getValue.toString().indexOf("not supported")?(a.get=function(a,d){var f=localStorage.getItem("weiboPlus."+a);return null===f?d:f},a.set=function(a,d){localStorage.setItem("weiboPlus."+a,d)}):(a.get=GM_getValue,a.set=GM_setValue),a.remove=function(a){a&&a.parentNode.removeChild(a)},a.click=function(a,d){a&&a.addEventListener("click",d,false)},a.scope=function(){return document.body.classList.contains("B_index")?1:document.body.classList.contains(a.V5?"B_profile":"B_my_profile_other")?2:0},a}();
if(!a)return!1;r.prototype={items:{whiteKeywords:["keyword"],blackKeywords:["keyword"],grayKeywords:["keyword"],URLKeywords:["keyword"],sourceKeywords:["keyword"],sourceGrayKeywords:["keyword"],userBlacklist:["array"],tipBackColor:["string","#FFD0D0"],tipTextColor:["string","#FF8080"],readerModeIndex:["bool"],readerModeProfile:["bool"],readerModeWidth:["string",750],readerModeBackColor:["string","rgba(100%, 100%, 100%, 0.8)"],mergeSidebars:["bool"],floatSidebar:["bool"],unwrapText:["bool"],showAllGroups:["bool"],
noDefaultFwd:["bool"],noDefaultGroupPub:["bool"],overrideMyBack:["bool"],overrideOtherBack:["bool"],backColor:["string","rgba(100%, 100%, 100%, 0.2)"],overrideMySkin:["bool"],overrideOtherSkin:["bool"],skinID:["string","skinvip001"],filterOthersOnly:["bool"],filterPaused:["bool"],filterSmiley:["bool"],filterPromotions:["bool"],filterDeleted:["bool"],filterFeelings:["bool"],filterDupFwd:["bool"],maxDupFwd:["string",1],filterFlood:["bool"],maxFlood:["string",5],autoUpdate:["bool",!0],floatBtn:["bool",
!0],useCustomStyles:["bool",!0],customStyles:["string"],hideMods:["array"]},toString:function(a){var d={},g;for(g in this.items)if(!a||"internal"!==this.items[g][0])d[g]=this[g];return JSON.stringify(d)},save:function(){a.set(a.uid.toString(),JSON.stringify(this))},load:function(a){var d={},g,f={keyword:[],string:"",bool:!1,array:[],object:{},internal:null};if(a)try{if(d=JSON.parse(a.replace(/\n/g,"")),"object"!==typeof d)throw 0;}catch(m){d={},a=null}for(g in this.items)this[g]=void 0!==d[g]?d[g]:
void 0!==this.items[g][1]?this.items[g][1]:f[this.items[g][0]];if(!1===this.hideMods instanceof Array){var d=[],n;for(n in this.hideMods)this.hideMods[n]&&d.push(n);this.hideMods=d}return null!==a}};var d=new r;d.load(a.get(a.uid.toString()))||alert("“眼不见心不烦”设置读取失败！\n设置信息格式有问题。");var B=function(){var j=function(d){GM_xmlhttpRequest({method:"GET",url:"http://userscripts.org/scripts/source/114087.meta.js?"+(new Date).getTime(),headers:{"Cache-Control":"no-cache"},onload:function(g){if(g.responseText.match(/@version\s+(.*)/)){a.set("lastCheckUpdateSuccess",
(new Date).getTime().toString());var i=RegExp.$1;if(!g.responseText.match(/@revision\s+(\d+)/)||RegExp.$1<=Number("75"))d&&alert("您使用的“眼不见心不烦”(v1.0.6)已经是最新版。");else{var j="";g.responseText.match(/@features\s+(.*)/)&&(j="- "+RegExp.$1.split("；").join("\n- ")+"\n\n");confirm("“眼不见心不烦”新版本v"+i+"可用。\n\n"+j+"如果您希望更新，请点击“确认”打开插件主页。")&&window.open("http://userscripts.org/scripts/show/114087")}}}})};if(d.autoUpdate){var i=a.get("lastCheckUpdateAttempt",0),g=(new Date).getTime();12E4<g-i&&(a.set("lastCheckUpdateAttempt",
g.toString()),i=a.get("lastCheckUpdateSuccess",0),6048E5<g-i&&j())}return j}(),z=function(){var j=!1,i,g,f=function(c){return g.getDom(c)},m=function(c,b,d){a.STK.core.evt.addEvent(g.getDom(c),d||"click",b)},n=function(c,a){return Array.prototype.map.call(f(c).childNodes,function(c){return a?c.getAttribute(a):c.textContent})},l=function(c,b,d){var e;if(b instanceof Array)e=b;else{e=[];for(var g=" "+f(b).value+" ",i=RegExp('(\\s"([^"]+)"\\s|\\s([^\\s]+)\\s)',"g"),p;null!==(p=i.exec(g));)e.push(p[2]||
p[3]),--i.lastIndex}e=e.filter(function(a){if(!a||-1<n(c,d).indexOf(a))return!1;var b=document.createElement("a");if(2<a.length&&"/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){try{RegExp(a.substring(1,a.length-1)).test("")}catch(o){return!0}b.className="regex"}b.title="点击删除";b.setAttribute("action-type","remove");d&&b.setAttribute(d,a);b.href="javascript:void(0)";b.textContent=a;f(c).appendChild(b);return!1});b instanceof Array||(f(b).value=e.join(" "),e.length&&a.STK.common.extra.shine(f(b)))},k=
!1,h=function(c,b){var d=!b,e=f(c);if(!d||!k){var g=d?n(c,"uid"):f(b).value.split(" "),i=g.length,p=[],j=a.STK.common.trans.relation.getTrans("userCard",{onComplete:function(g,j){var h;h=d?e.querySelector('a[uid="'+j.id+'"]'):document.createElement("a");if("100000"===g.code){var y=g.data.match(/<img[^>]+>/)[0];d||(j.id=y.match(/uid="([^"]+)"/)[1]);if(d||-1===n(c,"uid").indexOf(j.id))h.innerHTML="<img "+y.match(/src="[^"]+"/)[0]+" /><br />"+y.match(/title="([^"]+)"/)[1],d||(h.title="点击删除",h.href="javascript:void(0)",
h.setAttribute("uid",j.id),h.setAttribute("action-type","remove"),e.appendChild(h))}else d?h.innerHTML+="<br />（未找到）":p.push(j.name);0===--i&&(f(b).value=p.join(" "),p.length&&a.STK.common.extra.shine(f(b)))}});g.forEach(function(c){var a={type:1};d?a.id=c:a.name=c;j.request(a)});k=!0}},e=function(){var c=new r,a;for(a in c.items)switch(c.items[a][0]){case "keyword":c[a]=n(a+"List");break;case "string":c[a]=f(a).value;break;case "bool":c[a]=f(a).checked;break;case "array":c[a]=[];break;case "object":c[a]=
{};break;case "internal":c[a]=d[a]}c.userBlacklist=n("userBlacklist","uid");for(var b in q.modules)f("hide"+b).checked&&c.hideMods.push(b);f("settingsString").value=c.toString(!0);return c},y=function(a){for(var b in a.items)switch(a.items[b][0]){case "keyword":f(b).value="";f(b+"List").innerHTML="";l(b+"List",a[b]);break;case "string":f(b).value=a[b];break;case "bool":f(b).checked=a[b]}f("userBlacklistNew").value="";f("userBlacklist").innerHTML="";l("userBlacklist",a.userBlacklist,"uid");k=!1;b=
f("tipBackColor").value;var d=f("tipTextColor").value,e=f("tipSample");e.style.backgroundColor=b;e.style.borderColor=d;e.style.color=d;for(var g in q.modules)f("hide"+g).checked=-1<a.hideMods.indexOf(g);f("settingsString").value=a.toString(!0)},p=function(){i=a.STK.ui.dialog({isHold:!0});i.setTitle("“眼不见心不烦”(v1.0.6)设置");g=(a.STK.module.layer||a.STK.ui.mod.layer)('<div node-type="outer" class="detail wbpSettings" style="padding: 0 20px 20px"><div class="clearfix"><div style="float: left">新浪微博<span style="color: red">非官方</span>功能增强脚本。</div><div style="float: right; display: inline; position: relative"><a node-type="checkUpdate" href="javascript:void(0);" title="检查脚本是否有新版本">检查更新</a><em class="W_vline">|</em><a href="http://userscripts.org/scripts/show/114087" title="新版本在此页面发布" target="_blank">插件主页</a><em class="W_vline">|</em><a href="http://code.google.com/p/weibo-content-filter/wiki/FAQ" title="遇到问题请先阅读FAQ" target="_blank">常见问题</a><em class="W_vline">|</em><a href="/salviati" title="欢迎私信、评论或@作者提出脚本建议" target="_blank">联系作者</a></div></div><div class="clearfix"><div node-type="tabHeaders" class="wbpTabHeaders"><a tab="tabKeywords" href="javascript:void(0);" class="current">关键词</a><a tab="tabLinks" href="javascript:void(0);">链接地址</a><a node-type="tabHeaderUser" tab="tabUser" href="javascript:void(0);">用户</a><a tab="tabSource" href="javascript:void(0);">来源</a><a tab="tabAdvanced" href="javascript:void(0);">高级</a><a tab="tabModules" href="javascript:void(0);">模块</a><a tab="tabModify" href="javascript:void(0);">改造版面</a><a node-type="tabHeaderSettings" tab="tabSettings" href="javascript:void(0);">设置</a></div><div node-type="inner" style="float: right; width: 440px"><div node-type="tabKeywords"><div class="clearfix"><div style="float: left"><input type="checkbox" node-type="filterSmiley"><label title="如果选中，[呵呵]等表情也可以作为关键词被屏蔽">允许表情关键词</label></div><div style="float: right; display: inline; position: relative"><span class="link"><a href="javascript:void(0);" style="cursor: help">关键词设置帮助<span><ul><li>如果要添加的关键词中有空格，可将其置于一对<span style="color: blue">半角双引号</span>内，如<span style="color: green">"I love you"</span></li><li>使用<span style="color: blue">加号</span>分隔需要同时出现的关键词，如<span style="color: green">A+B+C</span>代表A、B、C三个词必须同时出现</li><li>使用<span style="color: blue">斜杠</span>设置正则表达式关键词，如<span style="color: green">/转发并@.{2,3}好友/</span></li></ul></span></a></span></div></div><div class="wbpKeywordBlock"><em>白名单</em>包含下列关键词的微博不会被屏蔽<table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="whiteKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=whiteKeywordsList&text=whiteKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=whiteKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="whiteKeywordsList" class="wbpKeywordsList wbpWhiteKeywordsList"></div></div></div><div class="wbpKeywordBlock"><em>黑名单</em>包含下列关键词的微博将被屏蔽<table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="blackKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=blackKeywordsList&text=blackKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=blackKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="blackKeywordsList" class="wbpKeywordsList wbpBlackKeywordsList"></div></div></div><div class="wbpKeywordBlock"><em>灰名单</em>包含下列关键词的微博将被屏蔽<span style="color: red">并提示</span><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="grayKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=grayKeywordsList&text=grayKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=grayKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="grayKeywordsList" class="wbpKeywordsList wbpGrayKeywordsList"></div></div><table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-top: 0px"><tbody><tr><td style="width: 110px">屏蔽提示背景颜色：</td><td><div class="wbpInput"><input type="text" node-type="tipBackColor" class="input"></div></td><td style="width: 15px"></td><td style="width: 110px">屏蔽提示文字颜色：</td><td><div class="wbpInput"><input type="text" node-type="tipTextColor" class="input"></div></td></tr></tbody></table><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td style="width: 40px">示例：</td><td><div node-type="tipSample" class="wbpTip" style="margin-bottom: 10px">本条来自<a href="javascript:void(0);">@某人</a>的微博因包含关键词“<a href="javascript:void(0);">XXXX</a>”而被隐藏，点击显示</div></td></tr></tbody></table></div></div><div node-type="tabLinks" style="display: none"><p>如果一条微博中包含链接且目标地址中包含下列关键词，微博将被屏蔽（无提示）。如将taobao.com设为关键词可屏蔽所有包含淘宝链接的微博。</p><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="URLKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=URLKeywordsList&text=URLKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=URLKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="URLKeywordsList" class="wbpKeywordsList wbpBlackKeywordsList"></div></div></div><div node-type="tabUser" style="display: none"><p>如果一条微博的发布者或转发原文的作者为下列用户之一，微博将被屏蔽。除了在此处添加屏蔽用户，您还可以将鼠标悬停在用户链接上，在弹出的信息气球上点击“屏蔽”。</p><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="userBlacklistNew" class="input" placeholder="多个用户名用空格隔开；不要加上前面的@；不区分大小写"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="addUser" action-data="list=userBlacklist&text=userBlacklistNew"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=userBlacklist"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper" style="max-height: 230px"><div node-type="userBlacklist" class="wbpUserList wbpBlackKeywordsList"></div></div></div><div node-type="tabSource" style="display: none"><p>如果一条微博的来源（包括转发原文的来源）名称中包含指定关键词，微博将被屏蔽。如将“时光机”设为关键词可屏蔽所有来自<a href="http://time.xuapp.com/" target="_blank">时光机</a>或<a href="http://weibo.pp.cc/time/" target="_blank">皮皮时光机</a>等应用的微博。</p><div class="wbpKeywordBlock"><em>黑名单</em>来源名称包含下列关键词的微博将被屏蔽<table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="sourceKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=sourceKeywordsList&text=sourceKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=sourceKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="sourceKeywordsList" class="wbpKeywordsList wbpBlackKeywordsList"></div></div></div><div class="wbpKeywordBlock"><em>灰名单</em>来源名称包含下列关键词的微博将被屏蔽<span style="color: red">并提示</span><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="wbpInput"><input type="text" node-type="sourceGrayKeywords" class="input" placeholder="多个关键词用空格隔开；不区分大小写；支持正则表达式"></div></td><td class="wbpToolBtns"><a href="javascript:void(0);" class="W_btn_b" action-type="add" action-data="list=sourceGrayKeywordsList&text=sourceGrayKeywords"><span>添加</span></a><a href="javascript:void(0);" class="W_btn_b" action-type="clear" action-data="list=sourceGrayKeywordsList"><span>清空</span></a></td></tr></tbody></table><div class="wbpListWrapper"><div node-type="sourceGrayKeywordsList" class="wbpKeywordsList wbpGrayKeywordsList"></div></div></div></div><div node-type="tabAdvanced" style="display: none"><p>注意：对于所有屏蔽微博的功能，白名单具有最高优先级；如果一条微博包含白名单中的关键词，则<span style="color: red">一定不会</span>被屏蔽。</p><p class="wbpV5Only"><input type="checkbox" node-type="filterOthersOnly"><label><span style="color: blue">不要屏蔽我自己发布的微博</span></label></p><p><input type="checkbox" node-type="filterPaused"><label><span style="color: red">暂停屏蔽</span>：选中时暂时停止屏蔽微博</label></p><p class="wbpV5Only"><input type="checkbox" node-type="filterPromotions"><label><span style="color: blue">屏蔽推广微博</span></label></p><p><input type="checkbox" node-type="filterDeleted"><label>屏蔽已删除微博的转发</label></p><p><input type="checkbox" node-type="filterFeelings"><label>屏蔽写心情微博</label></p><div style="margin-top: 8px"><input type="checkbox" node-type="filterDupFwd"><label>反版聊：同一条微博的转发最多显示</label><div class="wbpInput wbpInlineInput"><input type="text" node-type="maxDupFwd" class="input"></div>条</div><div style="margin-top: 5px"><input type="checkbox" node-type="filterFlood"><label>反刷屏：来自同一用户的微博最多显示</label><div class="wbpInput wbpInlineInput"><input type="text" node-type="maxFlood" class="input"></div>条</div></div><div node-type="tabModules" class="wbpTabModules" style="display: none"><p>请选择要屏蔽的版面内容。</p><table width="100%" border="0" cellspacing="0" cellpadding="0" style="line-height: 24px; margin-top: 15px"><tbody><tr><td><input type="checkbox" node-type="hideAds"><label>版面及嵌入广告</label></td><td><input type="checkbox" node-type="hideFooter"><label>页底链接模块</label></td></tr><tr><td><input type="checkbox" node-type="hideActivity"><label>微活动（发布框下方）</label></td><td><input type="checkbox" node-type="hideRecommendedTopic"><label>推荐微话题（发布框右上）</label></td></tr><tr class="wbpV4Only"><td><input type="checkbox" node-type="hideUserGuide"><label>微博精选</label></td><td><input type="checkbox" node-type="hideTasks"><label>微博宝典</label></td></tr><tr><td><input type="checkbox" node-type="hideMedal"><label>勋章</label></td><td><input type="checkbox" node-type="hideLevel"><label>微博等级</label></td></tr><tr class="wbpV4Only"><td><input type="checkbox" node-type="hideHello"><label>打招呼（个人主页）</label></td><td><input type="checkbox" node-type="hideBalloon"><label>各种提示气球</label></td></tr><tr><td><input type="checkbox" node-type="hideApp"><label>我的应用（左边栏）</label></td><td class="wbpV5Only"><input type="checkbox" node-type="hideRecomFeed"><label>精彩微博推荐</label></td><td class="wbpV4Only"><input type="checkbox" node-type="hideGame"><label>我的游戏（左边栏）</label></td></tr><tr class="wbpRowSpacing"><td><input type="checkbox" node-type="hideStats"><label>关注/粉丝/微博数</label></td><td><input type="checkbox" node-type="hideTopComment"><label>热评微博（“我的评论”页）</label></td></tr><tr><td><input type="checkbox" node-type="hideInterestUser"><label>可能感兴趣的人</label></td><td><input type="checkbox" node-type="hidePromotion"><label>新版微博推广</label></td></tr><tr><td><input type="checkbox" node-type="hideTopic"><label>热门话题/关注的话题</label></td><td><input type="checkbox" node-type="hideMember"><label>会员专区</label></td></tr><tr><td><input type="checkbox" node-type="hideAllInOne"><label>微吧/微刊/应用</label></td><td><input type="checkbox" node-type="hideNotice"><label>公告栏</label></td></tr><tr class="wbpV4Only"><td><input type="checkbox" node-type="hideMood"><label>心情</label></td><td><input type="checkbox" node-type="hideHelpFeedback"><label>玩转微博</label></td></tr><tr class="wbpV4Only"><td><input type="checkbox" node-type="hideUpgradeToV5"><label>升级新版微博</label></td></tr><tr class="wbpRowSpacing"><td><input type="checkbox" node-type="hideVerifyIcon"><label>个人/机构认证标识</label><a href="http://verified.weibo.com/verify" target="_blank"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 approve wbpShow"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 approve_co wbpShow"></a></td><td><input type="checkbox" node-type="hideDarenIcon"><label>微博达人标识</label><a href="http://club.weibo.com/intro" target="_blank"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 ico_club wbpShow"></a></td></tr><tr><td><input type="checkbox" node-type="hideMemberIcon"><label>微博会员标识</label><a href="http://vip.weibo.com/" target="_blank"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 ico_member wbpShow"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 ico_member_dis wbpShow"></a></td><td><input type="checkbox" node-type="hideVgirlIcon"><label>微博女郎标识</label><a href="http://vgirl.weibo.com/" target="_blank"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 ico_vlady wbpShow"></a></td></tr><tr><td><input type="checkbox" node-type="hideOppoIcon"><label><span style="color: blue">自由之星标识</span></label><a href="http://all.vic.sina.com.cn/2012oppoulike/index.php?c=index&a=home" target="_blank"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" class="W_ico16 ico_oppo wbpShow"></a></td></tr><tr class="wbpRowSpacing wbpV5Only"><td><input type="checkbox" node-type="hideProfCover"><label>封面图（个人主页）</label></td><td><input type="checkbox" node-type="hideProfStats"><label>关注/粉丝/微博数（个人主页）</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideNofollow"><label>加关注（未关注用户的个人主页）</label></td></tr><tr class="wbpV5Only"><td colspan="2"><input type="checkbox" node-type="hideMyRightSidebar"><label><span style="color: red">个人主页右边栏</span>：选中后整个右边栏将被去除</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideMyGift"><label><span style="color: blue">我的礼物盒（个人主页）</span></label></td><td><input type="checkbox" node-type="hideHisGift"><label><span style="color: blue">他/她的礼物盒（个人主页）</span></label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideMyRelation"><label>我的关注/粉丝（个人主页）</label></td><td><input type="checkbox" node-type="hideRelation"><label>微关系（个人主页）</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hidePublicGroup"><label>公开分组（个人主页）</label></td><td><input type="checkbox" node-type="hidePublicGroupRecom"><label>推荐的公开分组（个人主页）</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideAlbum"><label>微相册（个人主页）</label></td><td><input type="checkbox" node-type="hideAppWidget"><label>应用卡片（微游戏等，个人主页）</label></td></tr><tr class="wbpRowSpacing wbpV5Only"><td colspan="2"><input type="checkbox" node-type="hideFeedRightSidebar"><label><span style="color: red">单条微博右边栏</span>：选中后整个右边栏将被去除</label></td></tr></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideRecomPerson"><label>微博相关人（单条微博）</label></td><td><input type="checkbox" node-type="hideRecomTopic"><label>推荐话题（单条微博）</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideRecomWeibo"><label>推荐微博（单条微博）</label></td><td><input type="checkbox" node-type="hideHotWeibo"><label>热门微博（单条微博）</label></td></tr><tr class="wbpV5Only"><td><input type="checkbox" node-type="hideRecomWeiba"><label>推荐微吧（单条微博）</label></td><td><input type="checkbox" node-type="hideRecomWeikan"><label>推荐微刊（单条微博）</label></td></tr></tbody></table><p style="margin-top: 15px"><a href="javascript:void(0);" class="W_btn_b" node-type="hideAll"><span>全选</span></a><a href="javascript:void(0);" class="W_btn_b" node-type="hideInvert" style="margin-left: 5px"><span>反选</span></a></p></div><div node-type="tabModify" style="display: none"><p class="wbpV5Only"><input type="checkbox" node-type="mergeSidebars"><label><span style="color: red">双栏版式</span>（将左边栏并入右边栏）</label></p><p class="wbpV5Only"><input type="checkbox" node-type="floatSidebar"><label><span style="color: red">浮动常用边栏</span>（常用边栏随页面滚动）</label></p><p class="wbpV5Only"><input type="checkbox" node-type="showAllGroups"><label>始终显示所有分组</label></p><p class="wbpV5Only"><input type="checkbox" node-type="unwrapText"><label>微博作者与正文间不折行</label></p><p><input type="checkbox" node-type="noDefaultFwd"><label>禁止默认选中“同时转发到我的微博”</label></p><p class="wbpV5Only"><input type="checkbox" node-type="noDefaultGroupPub"><label><span style="color: blue">禁止在浏览分组时默认发布新微博到该分组</span></label></p><div style="margin-top: 15px">在<input type="checkbox" node-type="readerModeIndex" style="margin: 0 2px 0 8px"><label>我的首页</label><input type="checkbox" node-type="readerModeProfile" style="margin: 0 2px 0 8px"><label style="margin-right: 8px">个人主页</label>启用极简阅读模式<span style="color: red">（可按F8切换）</span><table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-top: 3px"><tbody><tr><td style="width: 85px; padding-left: 19px">宽度（像素）：</td><td><div class="wbpInput" style="width: 40px"><input type="text" node-type="readerModeWidth" class="input"></div></td><td style="width: 60px">背景颜色：</td><td><div class="wbpInput"><input type="text" node-type="readerModeBackColor" class="input"></div></td></tr></tbody></table></div><div class="wbpV5Only" style="margin-top: 10px">设置<input type="checkbox" node-type="overrideMyBack" style="margin: 0 2px 0 8px"><label>我的首页</label><input type="checkbox" node-type="overrideOtherBack" style="margin: 0 2px 0 8px"><label style="margin-right: 8px">个人主页</label>透明背景色<div class="wbpInput wbpInlineInput" style="width: 190px" title="最后一个参数为透明度，0为全透明，1为不透明"><input type="text" node-type="backColor" class="input"></div></div><div style="margin-top: 10px">覆盖<input type="checkbox" node-type="overrideMySkin" style="margin: 0 2px 0 8px"><label>我的首页</label><input type="checkbox" node-type="overrideOtherSkin" style="margin: 0 2px 0 8px"><label style="margin-right: 8px">个人主页</label>模板设置为<div class="wbpInput wbpInlineInput" style="width: 80px" title="普通模板为“skin+三位数字编号”，如skin012\n会员专属模板为“skinvip+三位数字编号”，如skinvip012\n默认模板为default"><input type="text" node-type="skinID" class="input"></div>（仅自己可见）</div><p style="margin-top: 10px"><input type="checkbox" node-type="useCustomStyles"><label><span style="color: red">自定义样式</span>（CSS）：可用于屏蔽模块、改造版面，</label><a href="http://code.google.com/p/weibo-content-filter/wiki/CustomCSS" target="_blank">点此查看示例</a></p><textarea node-type="customStyles" rows="6" style="margin-top: 5px"></textarea></div><div node-type="tabSettings" style="display: none"><p><input type="checkbox" node-type="autoUpdate"><label>每周自动检查更新</label></p><p><input type="checkbox" node-type="floatBtn"><label>浮动设置按钮（“返回顶部”浮动按钮下方）</label></p><div class="clearfix" style="margin-top: 8px"><div style="float: left; width: 385px"><p>当前账号的设置信息在下列文本框中，您可以将其复制到其它位置保存。需要导入设置时，请将设置信息粘贴到文本框中，然后点击“导入”。</p></div><a href="javascript:void(0)" class="W_btn_b" node-type="import" style="float: right; margin-top: 6px"><span>导入</span></a></div><textarea node-type="settingsString" rows="10"></textarea></div></div></div><p class="btn"><a href="javascript:void(0);" class="W_btn_a" node-type="OK"><span>确定</span></a><a href="javascript:void(0);" class="W_btn_c" node-type="cancel"><span>取消</span></a></p></div>');
g.getOuter().classList.add(a.V5?"wbpV5":"wbpV4");a.V5||(Array.prototype.forEach.call(g.getOuter().querySelectorAll(".W_btn_b"),function(a){a.className="W_btn_a"}),Array.prototype.forEach.call(g.getOuter().querySelectorAll(".wbpShow"),function(a){a.classList.remove("W_ico16")}),f("OK").className="W_btn_b",f("cancel").className="W_btn_a");i.setContent(g.getOuter());m("tipBackColor",function(){f("tipSample").style.backgroundColor=this.value},"blur");m("tipTextColor",function(){f("tipSample").style.borderColor=
this.value;f("tipSample").style.color=this.value},"blur");var b=a.STK.core.evt.delegatedEvent(g.getInner());b.add("add","click",function(a){l(a.data.list,a.data.text)});b.add("clear","click",function(a){f(a.data.list).innerHTML=""});b.add("remove","click",function(b){a.remove(b.el)});b.add("addUser","click",function(a){h(a.data.list,a.data.text)});m("inner",function(a){var b=a.target;if(b.parentNode&&b.parentNode.tagName==="LABEL")b=b.parentNode;if(b.tagName==="LABEL"){a.preventDefault();a.stopPropagation();
b.getAttribute("for")?f(b.getAttribute("for")).click():b.previousSibling.click()}});m("tabHeaders",function(a){var b=a.target;if(b&&b.tagName==="A"){b.className="current";f(b.getAttribute("tab")).style.display="";Array.prototype.forEach.call(this.childNodes,function(a){if(b!==a){a.className="";f(a.getAttribute("tab")).style.display="none"}})}});m("tabHeaderSettings",e);m("tabHeaderUser",function(){h("userBlacklist")});m("hideAll",function(){for(var a in q.modules)f("hide"+a).checked=true});m("hideInvert",
function(){for(var a in q.modules){var b=f("hide"+a);b.checked=!b.checked}});m("import",function(){var a=new r;if(a.load(f("settingsString").value)){y(a);alert("设置导入成功！")}else alert("设置导入失败！\n设置信息格式有问题。")});m("checkUpdate",B);m("OK",function(){d=e();d.save();A();q();i.hide()});m("cancel",i.hide);a.STK.custEvent.add(i,"hide",function(){j=false})},b=function(){i||p();j=!0;y(d);f("tabHeaderUser").classList.contains("current")&&h("userBlacklist");i.show().setMiddle()};b.shown=function(){return j};return b}(),
A=function(){var j={},i={},g=function(a,g){var f=a.toLowerCase(),b=d[g];if(""===a||0===b.length)return"";b=b.filter(function(b){if(!b)return!1;if(2<b.length&&"/"===b.charAt(0)&&"/"===b.charAt(b.length-1))try{return RegExp(b.substring(1,b.length-1)).test(a)}catch(d){}else return b.split("+").every(function(a){return-1<f.indexOf(a.toLowerCase())});return!1});return b.length?b[0]:""},f=document.createElement("div"),m=function(a){return d.filterSmiley?(f.innerHTML=a.innerHTML.replace(/<img[^>]+alt="(\[[^\]">]+\])"[^>]*>/g,
"$1").replace(/<\/?[^>]+>/g,"").replace(/[\r\n\t]/g,"").trim(),f.textContent):a.textContent.replace(/[\r\n\t]/g,"").trim()},n=function(a,d){a=a?a.title||a.textContent:"未通过审核应用";return g(a,d)},l=function(e){e.firstChild&&"wbpTip"===e.firstChild.className&&(e.removeChild(e.firstChild),a.V5&&e.removeChild(e.firstChild));var f=e.getAttribute("mid");if(!f)return!1;var h=a.scope(),b="1"===e.getAttribute("isforward"),c,o,k,w,l,q,u;a.V5?(c=1===h?e.querySelector(".WB_detail>.WB_info>a.WB_name"):null,o=e.querySelector(".WB_detail>.WB_text"),
k=e.querySelector(".WB_detail>.WB_func>.WB_from>em+a"),w=e.querySelector(".WB_media_expand .WB_info>a.WB_name"),l=e.querySelector(".WB_media_expand .WB_text"),q=e.querySelector(".WB_media_expand>.WB_func>.WB_from>em+a"),u=e.querySelector(".WB_media_expand .WB_func .WB_time")):(c=1===h?e.querySelector('dd.content>p[node-type="feed_list_content"]>a[usercard]'):null,o=e.querySelector('dd.content>p[node-type="feed_list_content"]'+(1===h?">em":"")),k=e.querySelector("dd.content>p.info>a.date+a"),w=e.querySelector('dd.content>dl.comment>dt[node-type="feed_list_forwardContent"]>a[usercard]'),
l=e.querySelector('dd.content>dl.comment>dt[node-type="feed_list_forwardContent"]>em'),q=e.querySelector("dd.content>dl.comment>dd.info>a.date + a"),u=e.querySelector("dd.content>dl.comment>dd.info>a.date"));var s=b?u?u.href:null:null,t=c?c.getAttribute("usercard"):null;if(!o)return!1;var x=1===h?"@"+c.getAttribute("nick-name")+": ":"",x=x+m(o);b&&(w&&l)&&(x+="////@"+w.getAttribute("nick-name")+": "+m(l));if(!d.filterPaused&&!(a.V5&&d.filterOthersOnly&&e.querySelector('.WB_detail>.WB_func>.WB_handle a[action-type="feed_list_delete"]')||
g(x,"whiteKeywords"))){if(function(){return h===1&&a.V5&&d.filterPromotions&&e.getAttribute("feedtype")==="ad"||d.filterDeleted&&b&&!w||(h===1&&c&&d.userBlacklist.indexOf(c.getAttribute("usercard").match(/id=(\d+)/)[1])>-1||b&&w&&d.userBlacklist.indexOf(w.getAttribute("usercard").match(/id=(\d+)/)[1])>-1)||d.filterFeelings&&e.querySelector("div.feelingBoxS")||(n(k,"sourceKeywords")||b&&n(q,"sourceKeywords"))||d.filterDupFwd&&s&&j[s]&&j[s].length>=Number(d.maxDupFwd)&&j[s].indexOf(f)===-1||d.filterFlood&&
t&&i[t]&&i[t]>=Number(d.maxFlood)&&i[t].indexOf(f)===-1||g(x,"blackKeywords")?true:Array.prototype.some.call(e.getElementsByTagName("A"),function(a){return a.href.substring(0,12)==="http://t.cn/"&&g(a.title,"URLKeywords")?true:false})}())return e.style.display="none",!0;l=n(k,"sourceGrayKeywords");u=g(x,"grayKeywords");!l&&b&&(l=n(q,"sourceGrayKeywords"));if(u||l){var v;1===h&&(v=c.cloneNode(!1),v.textContent="@"+c.getAttribute("nick-name"),v.className="");o=document.createElement("a");o.href="javascript:void(0)";
o.className="wbpTip";var r=document.createElement("a");r.href="javascript:void(0)";r.className="wbpTipKeyword";r.textContent=u||l;1===h?(o.appendChild(document.createTextNode("本条来自")),o.appendChild(v),o.appendChild(document.createTextNode("的微博因"))):2===h&&o.appendChild(document.createTextNode("本条微博因"));o.appendChild(document.createTextNode(u?"内容包含“":"来源名称包含“"));o.appendChild(r);o.appendChild(document.createTextNode("”而被隐藏，点击显示"));a.V5?(v=document.createElement("div"),v.className="S_line2 wbpTipLine",
e.insertBefore(v,e.firstChild),e.insertBefore(o,v)):e.insertBefore(o,e.firstChild);return!0}}e.style.display="";if(!d.filterPaused&&(d.filterDupFwd&&s&&(j[s]||(j[s]=[]),-1===j[s].indexOf(f)&&j[s].push(f)),d.filterFlood&&t))i[t]||(i[t]=[]),-1===i[t].indexOf(f)&&i[t].push(f);return!1},k=function(){a.scope()&&(j={},i={},Array.prototype.forEach.call(document.querySelectorAll(a.V5?".WB_feed_type":".feed_list"),l))},h=function(d){d&&a.click(d,function(d){var e=d.target;e&&"A"===e.tagName&&("wbpTipKeyword"===
e.className?(z(),d.stopPropagation()):"wbpTip"===e.className&&(a.remove(e.nextSibling),a.remove(e)))})};a.scope()&&(h(a.select(a.V5?".WB_feed":".feed_lists")),k());document.addEventListener("DOMNodeInserted",function(d){if(a.scope()!==0){d=d.target;if(d.tagName===(a.V5?"DIV":"DL")&&d.classList.contains(a.V5?"WB_feed_type":"feed_list"))l(d);else if(d.tagName==="DIV"&&d.classList.contains("W_loading")){d=d.getAttribute("requesttype");if(d==="search"||d==="page"){j={};i={}}}else if(d.tagName==="DIV"&&
d.classList.contains(a.V5?"WB_feed":"feed_lists")){h(d);k()}}},!1);return k}(),q=function(){var j=a.V5?{Ads:'#plc_main [id^="pl_rightmod_ads"], #Box_right [id^="ads_"], div[ad-data]',Stats:"#pl_rightmod_myinfo .user_atten",InterestUser:"#trustPagelet_recom_interestv5",Promotion:"#pl_rightmod_yunying, #trustPagelet_checkin_lotteryv5",Topic:"#trustPagelet_zt_hottopicv5",Member:"#trustPagelet_recom_memberv5",AllInOne:"#trustPagelet_recom_allinonev5",Notice:"#pl_rightmod_noticeboard",Footer:"div.global_footer",
Activity:"#pl_content_biztips",RecommendedTopic:'#pl_content_publisherTop div[node-type="recommendTopic"]',App:"#pl_leftnav_app",Level:"span.W_level_ico",TopComment:"#pl_content_commentTopNav",Medal:".pf_badge_icon",RecomFeed:'div[node-type="feed_list_recommend"]',Nofollow:"#pl_profile_unfollow",MyRightSidebar:".B_profile .W_main_c, .B_profile .WB_feed .repeat .input textarea { width: 100% } .B_profile .W_main_2r",ProfCover:"#plc_profile_header { min-height: 250px } #plc_profile_header .pf_head { top: 10px } #plc_profile_header .pf_info { margin-top: 20px } #plc_profile_header .S_bg5 { background-color: transparent !important } #pl_profile_cover",
ProfStats:"#plc_profile_header { min-height: 195px } #pl_profile_photo .user_atten",MyGift:"#pl_profile_giftBox",HisGift:"#pl_profile_hisGiftBox",MyRelation:"#pl_profile_moduleMyRelation",Relation:"#pl_profile_moduleHisRelation",PublicGroup:"#pl_profile_modulePublicGroup",PublicGroupRecom:"#pl_profile_modulePublicGroupRecommend",Album:"#pl_profile_modulealbum",AppWidget:"#pl_profile_appWidget, #trustPagelet_profile_openApplist",FeedRightSidebar:".B_onefeed .W_main_c, .B_onefeed .WB_detail .WB_media_expand .input textarea { width: 100% } .B_onefeed .W_main_2r",
RecomPerson:"#pl_rightmod_recomperson",RecomTopic:"#trustPagelet_mblog_topic",RecomWeibo:"#pl_rightmod_recommblog",RecomWeiba:"#trustPagelet_mblog_weiba",RecomWeikan:"#trustPagelet_mblog_weikan",HotWeibo:"#trustPagelet_mblog_hotmblog",MemberIcon:".ico_member:not(.wbpShow), .ico_member_dis:not(.wbpShow)",VerifyIcon:".approve:not(.wbpShow), .approve_co:not(.wbpShow)",DarenIcon:".ico_club:not(.wbpShow)",VgirlIcon:".ico_vlady:not(.wbpShow)",OppoIcon:".ico_oppo:not(.wbpShow)"}:{Ads:'#plc_main .W_main_r [id^="ads_"], div[ad-data]',
Stats:"ul.user_atten",Topic:"#trustPagelete_zt_hottopic",InterestUser:"#trustPagelete_recom_interest",AllInOne:"#trustPagelete_recom_allinone",Notice:"#pl_rightmod_noticeboard",HelpFeedback:"#pl_rightmod_help, #pl_rightmod_feedback, #pl_rightmod_tipstitle",UpgradeToV5:"#pl_rightmod_freeupgrade, #pl_rightmod_upgradeassis",Footer:"div.global_footer",Activity:"#pl_content_biztips",RecommendedTopic:'#pl_content_publisherTop div[node-type="recommendTopic"]',Mood:"#pl_content_mood",Medal:"#pl_rightmod_medal, .declist",
Game:"#pl_leftNav_game",App:"#pl_leftNav_app",Tasks:"#pl_content_tasks",UserGuide:"#pl_guide_oldUser",Promotion:"#trustPagelet_ugrowth_invite",Level:"span.W_level_ico",Hello:"div.wbim_hello",Balloon:"div.layer_tips",TopComment:"#pl_content_commentTopNav",Member:"#trustPagelet_recom_member, #trustPagelet_member_zone",MemberIcon:".ico_member:not(.wbpShow), .ico_member_dis:not(.wbpShow)",VerifyIcon:".approve:not(.wbpShow), .approve_co:not(.wbpShow)",DarenIcon:".ico_club:not(.wbpShow)",VgirlIcon:".ico_vlady:not(.wbpShow)"},
i=function(){if(!a("wbpShowSettings")){var b=a.select(a.V5?"ul.sort":"#pl_content_homeFeed .nfTagB > ul, #pl_content_hisFeed .nfTagB > ul");if(!b)return!1;var c=document.createElement("li");c.id="wbpShowSettings";c.className="item";c.innerHTML=a.V5?'<a href="javascript:void(0)" class="item_link S_func1">眼不见心不烦</a>':'<span><em><a href="javascript:void(0)">眼不见心不烦</a></em></span>';a.click(c,z);b.appendChild(c)}return!0},g=function(){function b(){null!==e&&500>(new Date).getTime()-e&&(clearTimeout(f),
f=null);e=(new Date).getTime();f=setTimeout(function(){if(c)c.style.visibility=window.scrollY>0?"visible":"hidden"},100)}var c=null,e=null,f=null;return function(){if(!d.floatBtn&&c)return window.removeEventListener("scroll",b,!1),a.remove(c),c=null,!0;if(d.floatBtn&&!c){var e=a("base_scrollToTop");if(!e)return!1;c=document.createElement("a");c.href="javascript:void(0)";c.title="眼不见心不烦";c.id="wbpFloatBtn";a.V5?(c.innerHTML='<span class="S_line5" style="padding: 4px 0 6px; height: auto">★</span>',
c.className="W_gotop S_line3",c.style.bottom="75px",c.style.height="24px"):(c.innerHTML='<span style="padding: 0 0 6px;">★</span>',c.className="W_gotop",c.style.bottom="72px");a.click(c,z);e.parentNode.appendChild(c);window.addEventListener("scroll",b,!1);b();return!0}return!1}}(),f=function(){var b=a("wbpReaderModeStyles");if(d.readerModeIndex||d.readerModeProfile){b||(b=document.createElement("style"),b.type="text/css",b.id="wbpReaderModeStyles",document.head.appendChild(b));var c=Number(d.readerModeWidth);
b.innerHTML="";d.readerModeIndex&&(b.innerHTML=a.V5?b.innerHTML+(".B_index .W_main_l, .B_index .W_main_r, .B_index #Box_center>div:not(#pl_content_homeFeed), .B_index .group_read, .B_index .global_footer { display: none }\n.B_index #pl_content_top, .B_index .WB_global_nav { top: -40px }\n.B_index { background-position-y: -40px }\n.B_index .W_miniblog { padding-top: 20px; background-position-y: -40px }\n.B_index .W_main { width: "+c+"px !important; background: "+d.readerModeBackColor+" }\n.B_index #Box_center, .B_index .W_main_a { width: "+
c+"px }\n.B_index .WB_feed .repeat .input textarea { width: 100% }\n.B_index .WB_feed .WB_screen { margin-left: "+(c-48)+"px }\n"):a.config.isnarrow?b.innerHTML+(".B_index .W_main_r, .B_index .W_main_c>div:not(.custom_content_bg), .B_index .custom_content_bg>div:not(#pl_content_homeFeed), .B_index .global_footer { display: none }\n.B_index .global_header { top: -35px }\n.B_index .W_miniblog { background-position-y: -35px }\n.B_index #plc_main .custom_content_bg { padding-top: 30px }\n.B_index .W_main_narrow { padding-top: 17px; width: "+
c+"px }\n.B_index .W_main_c { width: "+c+"px }\n.B_index .W_main_narrow_bg { background: "+d.readerModeBackColor+" }\n.B_index .feed_list .repeat .input textarea { width: 100% }\n"):b.innerHTML+(".B_index #Box_left, .B_index #Box_right, .B_index #Box_center>div:not(#pl_content_homeFeed), .B_index .global_footer { display: none }\n.B_index .global_header { top: -35px }\n.B_index .W_miniblog { background-position-y: -35px }\n.B_index .W_main { padding-top: 17px; width: "+c+"px }\n.B_index #Box_center { width: "+
(c-45)+"px }\n.B_index .W_main_bg { background: "+d.readerModeBackColor+" }\n.B_index .feed_list .repeat .input textarea { width: 100% }\n"),b.innerHTML+=".B_index .W_gotop { margin-left: "+c/2+"px !important }\n");d.readerModeProfile&&(b.innerHTML=a.V5?b.innerHTML+(".B_profile #plc_profile_header, .B_profile #pl_profile_nav, .B_profile #pl_profile_cover, .B_profile .group_read, .B_profile .W_main_2r, .B_profile .group_read, .B_profile .global_footer { display: none }\n.B_profile #pl_content_top, .B_profile .WB_global_nav { top: -40px }\n.B_profile { background-position-y: -40px }\n.B_profile .W_miniblog { padding-top: 20px; background-position-y: -40px }\n.B_profile .W_main { width: "+
c+"px !important; background: "+d.readerModeBackColor+" }\n.B_profile .W_main_c { padding-top: 0; width: "+c+"px }\n.B_profile .WB_feed .repeat .input textarea { width: 100% }\n.B_profile"):a.config.isnarrow?b.innerHTML+(".B_my_profile_other .W_main_r, .B_my_profile_other .W_main_c>div:not(.custom_content_bg), .B_my_profile_other .custom_content_bg>div:not(#pl_content_hisFeed), .B_my_profile_other .global_footer { display: none }\n.B_my_profile_other .global_header { top: -35px }\n.B_my_profile_other .W_miniblog { background-position-y: -35px }\n.B_my_profile_other #plc_main .custom_content_bg { padding-top: 30px }\n.B_my_profile_other .W_main_narrow { padding-top: 17px; width: "+
c+"px }\n.B_my_profile_other .W_main_c { width: "+c+"px }\n.B_my_profile_other .W_main_narrow_bg { background: white }\n.B_my_profile_other .feed_list .repeat .input textarea { width: 100% }\n.B_my_profile_other"):b.innerHTML+(".B_my_profile_other .W_main_l, .B_my_profile_other .W_main_r, .B_my_profile_other .W_main_c>div:not(#pl_content_hisFeed), .B_my_profile_other .global_footer { display: none }\n.B_my_profile_other .global_header { top: -35px }\n.B_my_profile_other .W_miniblog { background-position-y: -35px }\n.B_my_profile_other .W_main { padding-top: 17px; width: "+
c+"px }\n.B_my_profile_other .W_main_c { width: "+(c-45)+"px }\n.B_my_profile_other .W_main_bg { background: rgba(100%, 100%, 100%, 0.8) }\n.B_my_profile_other .feed_list .repeat .input textarea { width: 100% }\n.B_my_profile_other"),b.innerHTML+=" .W_gotop { margin-left: "+c/2+"px !important }\n")}else b&&a.remove(b)},m=function(){var b="";d.hideMods.forEach(function(a){j[a]&&(b+=j[a]+" { display: none !important }\n")});var c=d.tipTextColor,b=b+(".wbpTip:not(:hover) { background-color: "+d.tipBackColor+
"; border-color: "+c+"; color: "+c+"; }"),c=a("wbpModuleStyles");c||(c=document.createElement("style"),c.type="text/css",c.id="wbpModuleStyles",document.head.appendChild(c));c.innerHTML=b+"\n"},n=function(a){if((a=a.querySelector('.commoned_list .W_checkbox[name="forward"]'))&&a.checked)a.checked=!1},l=function(b){b=b.querySelector('.limits a[node-type="showPublishTo"]');a.V5&&b&&(b.firstChild.innerHTML="公开",b.setAttribute("action-data","rank=0"))},k=a.select(".W_main_l"),h;k&&(h=k.querySelector(".WB_left_nav"));
var e=function(){if(h&&"pl_leftNav_relation"!==h.id)if(d.mergeSidebars&&!h.id){var b=a.select(".W_main_r"),c=a("pl_rightmod_myinfo");b&&(k.style.display="none",h.id="wbpNavBar",a.select(".W_main").style.cssText="width: 830px; background-position: -150px 0",b.insertBefore(h,c?c.nextSibling:b.firstChild))}else!d.mergeSidebars&&h.id&&(h.id="",k.style.display="none",a.select(".W_main").style.cssText="",k.appendChild(h),k.style.display="")},q=function(b){var c=b.querySelector("ul.userdata a"),e=b.querySelector(".links > p");
if(!c||!e)return!1;var f=c.pathname.split("/")[1];if(f===a.uid)return!1;e.childElementCount&&(c=document.createElement("span"),c.className="W_vline",c.innerHTML="|",e.appendChild(c));c=document.createElement("a");c.href="javascript:void(0)";c.innerHTML=-1===d.userBlacklist.indexOf(f)?"屏蔽":"解除屏蔽";a.click(c,function(){var a=d.userBlacklist.indexOf(f);a===-1?d.userBlacklist.push(f):d.userBlacklist.splice(a,1);d.save();for(A();b.className!=="W_layer";)b=b.parentNode;b.style.display="none"});e.appendChild(c)},
p=function(){f();i();g();e();m();var b=a("custom_style")||a("skin_transformers"),c=a("wbpOverrideSkin");b&&(a.uid===a.config.oid&&d.overrideMySkin||a.uid!==a.config.oid&&d.overrideOtherSkin?(c||(c=document.createElement("link"),c.id="wbpOverrideSkin",c.type="text/css",c.rel="stylesheet",c.charset="utf-8",document.head.insertBefore(c,b)),c.href=a.config.cssPath+"skin/"+d.skinID+"/skin"+(a.config.isnarrow?"_narrow":"")+("zh-tw"===a.config.lang?"_CHT":"")+".css?version="+a.config.version,b.disabled=
!0):c&&(a.remove(c),b.disabled=!1));b=".W_person_info { margin: 0 20px 20px !important }\n";c=a("wbpCustomStyles");c||(c=document.createElement("style"),c.type="text/css",c.id="wbpCustomStyles",document.head.appendChild(c));a.V5&&d.showAllGroups&&(b+='#pl_leftnav_group div[node-type="moreList"] { display: block !important } #pl_leftnav_group .level_2_Box > .levmore { display: none }\n');a.V5&&d.unwrapText&&(b+='.WB_info, .WB_text { display: inline } .WB_info+.WB_text:before { content: "：" } .WB_func { margin-top: 5px } .B_index .WB_feed .W_ico16 { vertical-align: -3px !important }\n');
a.V5&&d.mergeSidebars&&(b+="body:not(.S_profile) .W_gotop { margin-left: 415px }\n");a.V5&&d.floatSidebar&&(b=d.mergeSidebars?b+"body:not(.S_profile) .W_main_r { position: fixed; margin-left: 600px; } body:not(.S_profile) .W_main_r > div { display: none } body:not(.S_profile) #wbpNavBar, #pl_rightmod_myinfo { display: block !important }\n":b+"body:not(.S_profile) .WB_left_nav { position: fixed; width: 150px }\n");a.V5&&d.overrideMyBack&&(b+="body:not(.S_profile) .W_main { background: none "+d.backColor+
" !important } body:not(.S_profile) .S_bg4, body:not(.S_profile) .W_main_a, body:not(.S_profile) .W_main_bg { background: none transparent !important }\n");a.V5&&d.overrideOtherBack&&(b+=".S_profile .W_profile_bg { background-color: "+d.backColor+" } .S_profile .S_bg4:not(.W_profile_bg), .S_profile .S_bg5, .S_profile .profile_tabbig { background: none transparent !important }\n");d.useCustomStyles&&(b+=d.customStyles);c.innerHTML=b+"\n"};GM_addStyle('.wbpTip{border:1px solid;display:block;line-height:23px;text-align:center}.wbpTip:hover{background-color:#D0FFD0;border-color:#40D040;color:#40D040;margin-bottom:10px}.wbpTip:not(:hover) ~ :not(.wbpTipLine){display:none !important}.wbpTip:hover ~ *{opacity:0.5}.wbpTip:hover + .wbpTipLine{display:none}.wbpTipLine{padding-bottom:20px;border-bottom-style:solid;border-bottom-width:1px}#wbpNavBar{margin-bottom:20px}#wbpNavBar .lev a,#wbpNavBar .lev2 a, #wbpNavBar .levmenu, #wbpNavBar .levmenu .lm_li:hover{background-image:none}#wbpNavBar .lev a.lev_curr{background-color:transparent}#wbpNavBar .left_nav_line fieldset .btns{margin-left:148px}#wbpNavBar .WB_left_nav .lev_edit .lev a{width:200px}.wbpV4 .wbpV5Only,.wbpV5 .wbpV4Only{display:none}.wbpSettings p{line-height:150%}.wbpSettings p+p{margin-top:10px}.wbpSettings em.W_vline{margin:0 8px}.wbpSettings table{line-height:30px;margin-top:8px}.wbpSettings span.link{position:relative}.wbpSettings span.link a>span{display:none}.wbpSettings span.link a>span li{list-style:circle inside;padding-left:1em;text-indent:-1em}.wbpSettings span.link a>span li+li{margin-top:5px}.wbpSettings span.link a:hover > span{display:block;position:absolute;margin-top:10px;margin-left:-100px;width:250px;padding:5px;z-index:20000;background:#FFFFB0;color:black;border:1px solid #808000;text-align:left;text-decoration:none;border-radius:3px 3px;box-shadow:3px 3px 3px rgba(0,0,0,0.2)}.wbpTabHeaders{float:left;width:100px;margin-right:10px}.wbpTabHeaders a{display:block;padding:6px 0;text-align:center;text-decoration:none}.wbpTabHeaders a:hover{background-color:#C6E8F4}.wbpTabHeaders a.current{background-color:#79C5E9;color:white;cursor:default}.wbpInput{border:1px solid #D2D5D8;padding:0 2px}.wbpInlineInput{display:inline-block;width:30px;margin:0 3px;vertical-align:middle}.wbpInput input{width:100%;height:22px;border:0;padding:0;margin:0;display:block}.wbpSettings>div{margin-top:15px}.wbpSettings textarea{width:440px;margin-top:10px;border:1px solid #D2D5D8}.wbpSettings input[type="checkbox"]{vertical-align:middle;margin-right:5px}.wbpTabModules tr.wbpRowSpacing td{padding-top:10px}.wbpKeywordBlock{margin-top:10px;border:1px solid #D2D5D8;padding:8px 8px 0}.wbpKeywordBlock em{font-weight:bold;margin-right:15px}.wbpV5 .wbpToolBtns{width:105px;text-align:right}.wbpV4 .wbpToolBtns{width:120px;text-align:right}.wbpToolBtns a+a{margin-left:5px}.wbpListWrapper{margin:8px 0;max-height:120px;overflow:hidden}.wbpListWrapper:hover{overflow-y:auto}.wbpKeywordsList{margin-top:-5px;line-height:18px}.wbpKeywordsList a{margin:5px 5px 0 0;padding:0 4px;border:1px solid;display:inline-block;height:18px;white-space:nowrap}.wbpKeywordsList a:hover{text-decoration:none}.wbpWhiteKeywordsList a{border-color:#008000;color:#008000}.wbpWhiteKeywordsList a.regex{background-color:#80FF80}.wbpWhiteKeywordsList a:hover{border-color:#008000;background-color:#D0FFD0}.wbpBlackKeywordsList a{border-color:#D00000;color:#D00000}.wbpBlackKeywordsList a.regex{background-color:#FFB0B0}.wbpBlackKeywordsList a:hover{border-color:#FF0000;background-color:#FFD0D0}.wbpGrayKeywordsList a{border-color:#808000;color:#808000}.wbpGrayKeywordsList a.regex{background-color:#FFFF00}.wbpGrayKeywordsList a:hover{border-color:#808000;background-color:#FFFFB0}.wbpUserList>a{margin:5px 5px 0 0;padding:3px;border:1px solid;display:inline-block;cursor:pointer;text-align:center;text-decoration:none}');
p();n(document);l(document);document.addEventListener("DOMNodeInserted",function(b){var c=a.scope(),b=b.target;"DIV"===b.tagName&&(c&&(a.V5?b.classList.contains("group_read"):b.querySelector(".nfTagB"))?i():b.classList.contains("name_card")?q(b):b.classList.contains("W_main_r")||b.querySelector(".W_main_r")?e():d.noDefaultFwd&&b.querySelector(".commoned_list")?n(b):d.noDefaultGroupPub&&b.classList.contains("send_weibo")&&l(b))},!1);document.addEventListener("DOMNodeRemoved",function(a){h&&h.id&&(a=
a.target,"DIV"===a.tagName&&a.querySelector("#wbpNavBar")&&(h.id="",k.appendChild(h)))});document.addEventListener("keyup",function(b){if(!z.shown()){var c=a.scope();c&&119===b.keyCode&&(1===c?d.readerModeIndex=!d.readerModeIndex:d.readerModeProfile=!d.readerModeProfile,d.save(),f())}},!1);p.modules=j;return p}()})();